"console"in window&&window.console.log||(window.console={log:function(){}});var settings;!function(t){window.LISTEDBLUE={version:.1,touch:!!("ontouchstart"in window),logEl:"#notification",logEvent:"show-message",settings:{debug:!0},init:function(t){this.dataURL="json/data.json",this.fetch(),this.template=t.template,this.container=t.container},pubSub:function(){var i=t({});t.each({trigger:"publish",on:"subscribe",off:"unsubscribe"},function(t,s){jQuery[s]=function(){i[t].apply(i,arguments)}})},attachTemplate:function(){var t=Handlebars.compile(this.template);t(this.products),this.container.append(t(this.products)),this.setInterface()},fetch:function(){var i=this;t.getJSON(this.dataURL,function(t){i.products=t.products,i.attachTemplate()})},setInterface:function(){this.isPortrait=!1,this.theBody=t("body"),this.theWindow=t(window),this.header=t("header"),this.footer=t("footer"),this.mainWrap=t(".main-wrap"),this.productWrap=t(".product-wrap"),this.productInfo=t(".product-info"),this.productNavigationWrap=t(".product-navigation"),this.btnNext=this.productNavigationWrap.find(".next"),this.btnPrev=this.productNavigationWrap.find(".prev"),this.selectedProductIndex=0,this.mainVisuals=t(".product-visual").find("img"),this.AllProducts=this.productWrap.find(".product"),this.AllProducts.css("display","none"),this.maxProducts=this.AllProducts.length,this.setProduct(this.selectedProductIndex),this.viewportWidth=this.theWindow.width(),this.viewportHeight=this.theWindow.outerHeight(),this.heightTotal=this.mainWrap.height(),this.productVisual=t(".product-visual"),this.productInfo=t(".product-info"),this.restHeigth=this.footer.height()+this.productInfo.height(),console.log("restHeight "+this.restHeigth),this.productVisualHeight=this.viewportHeight-this.restHeigth,this.theWindow.on("orientationchange",this.onTurnScreen.bind(this)),this.applyOrientation(),this.setMainVisial(),this.theWindow.on("resize",this.resizeHandler.bind(this)),setTimeout(this.resizeHandler.bind(this),100),this.btnNext.on("click",this.setNextProductIndex.bind(this)),this.btnPrev.on("click",this.setPrevProductIndex.bind(this))},getProduct:function(i){return t(this.AllProducts[i])},setProduct:function(i){this.curProduct=t(this.AllProducts[i]),this.curProduct.css("z-index",1),this.mainVisual=this.curProduct.find("img"),this.toggleProduct()},toggleProduct:function(){this.oldProduct&&this.oldProduct.css("display","none"),this.curProduct.fadeIn("slow",function(){this.oldProduct}),setTimeout(this.resizeHandler.bind(this),1)},setNextProductIndex:function(t){t.preventDefault(),this.oldProduct=this.curProduct,this.selectedProductIndex<this.maxProducts-1?this.selectedProductIndex++:this.selectedProductIndex=0,this.setProduct(this.selectedProductIndex),console.log("NEXT : "+this.selectedProductIndex)},setPrevProductIndex:function(t){t.preventDefault(),this.oldProduct=this.curProduct,this.selectedProductIndex>0?this.selectedProductIndex--:this.selectedProductIndex=this.maxProducts-1,this.setProduct(this.selectedProductIndex),console.log("PREV : "+this.selectedProductIndex)},setMainVisial:function(){this.isPortrait||(this.heightTotal>=this.productVisualHeight?(this.mainVisual.css("width","auto"),this.mainVisual.css("height",this.productVisualHeight+"px")):(this.mainVisual.css("width","100%"),this.mainVisual.css("height","auto")))},applyOrientation:function(){window.innerHeight>window.innerWidth?this.setPortraitMode():this.setLandscapeMode()},onTurnScreen:function(){0==window.orientation},setPortraitMode:function(){console.log("You are now in portrait"),this.isPortrait=!0,this.theBody.addClass("is-portrait"),this.theBody.removeClass("is-landscape"),this.mainVisual.css("height",this.viewportHeight+"px"),this.mainVisual.css("width","auto"),this.header.css("width",this.mainVisual.width()),this.footer.css("width",this.mainVisual.width()),this.productInfo.css("width",this.mainVisual.width());var t=(this.mainVisual.width()-this.viewportWidth)/2;console.log("this.mainVisual.width "+this.mainVisual.width()),console.log("this.viewportWidth "+this.viewportWidth),console.log("scrollto "+t),this.viewportWidth-t,window.scrollTo(t,0)},setLandscapeMode:function(){console.log("You are now in landscape"),this.isPortrait=!1,this.theBody.removeClass("is-portrait"),this.theBody.addClass("is-landscape"),this.mainVisual.css("width","100%"),this.mainVisual.css("height","auto"),this.header.css("width","100%"),this.productInfo.css("width","100%"),this.footer.css("width","100%"),window.scrollTo(0,0)},scrollHandler:function(){},resizeHandler:function(){this.applyOrientation(),this.viewportHeight=this.theWindow.outerHeight(),this.viewportWidth=this.theWindow.outerWidth(),this.heightTotal=this.mainVisual.height(),this.productVisualHeight=this.viewportHeight-this.restHeigth,console.log("this.viewportHeight "+this.viewportHeight),console.log("this.restHeigth "+this.restHeigth),console.log("this.productVisualHeight "+this.productVisualHeight),console.log("this.heightTotal "+this.heightTotal),this.setMainVisial()}},t(function(){LISTEDBLUE.init({template:t("#product-template").html(),container:t(".product-wrap")})})}(window.jQuery);