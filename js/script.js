"console"in window&&window.console.log||(window.console={log:function(){}});var settings;!function(a){window.LISTEDBLUE={version:.1,touch:!!("ontouchstart"in window),logEl:"#notification",logEvent:"show-message",settings:{debug:!0},init:function(b){this.dataURL="json/data.json",this.fetch(),this.template=b.template,this.container=b.container,this.colorArray=[];this.pubSub(),a.subscribe("listedblue/data",function(a,b){console.log(b)})},pubSub:function(){var b=a({});a.each({trigger:"publish",on:"subscribe",off:"unsubscribe"},function(a,c){jQuery[c]=function(){b[a].apply(b,arguments)}})},attachTemplate:function(){{var a=Handlebars.compile(this.template);a(this.products)}this.container.append(a(this.products)),this.setInterface()},fetch:function(){var b=this;a.getJSON(this.dataURL,function(c){b.products=c.products,a.publish("listedblue/data",c),b.attachTemplate()})},setInterface:function(){this.isPortrait=!1,this.mainNavIsVisible=!1,this.colorArray=[],this.theBody=a("body"),this.theWindow=a(window),this.header=a("header"),this.mainWrap=a(".main-wrap"),this.productWrap=a(".product-wrap"),this.productOverlay=a(".product-overlay"),this.productInfo=a(".product-info"),this.productNavigationWrap=a(".product-navigation"),this.btnNext=this.productNavigationWrap.find(".next"),this.btnPrev=this.productNavigationWrap.find(".prev"),this.mainNav=a(".main-navigation"),this.selectedProductIndex=0,this.allProducts=this.productWrap.find(".product").css("display","none"),this.maxProducts=this.allProducts.length,this.setProduct(this.selectedProductIndex),this.viewportWidth=this.theWindow.width(),this.viewportHeight=this.theWindow.outerHeight(),this.heightTotal=this.mainWrap.height(),this.productVisual=a(".product-visual"),this.productInfo=a(".product-info"),this.restHeigth=this.productInfo.height(),this.productVisualHeight=this.viewportHeight-this.restHeigth,this.theWindow.on("orientationchange",this.onTurnScreen.bind(this)),this.applyOrientation(),this.setMainVisial(),this.theWindow.on("resize",this.resizeHandler.bind(this)),this.overlayCloseBtn=a(".navigation-wrap").find(".btn-close"),this.mainNavToggle=a(".btn-nav-toggle");setTimeout(this.resizeHandler.bind(this),100);this.btnNext.on("click touchstart",this.setNextProductIndex.bind(this)),this.btnPrev.on("click touchstart",this.setPrevProductIndex.bind(this)),this.productVisual.find("img").on("click touchstart",this.openOverlay.bind(this)),this.overlayCloseBtn.on("click touchstart",this.closeOverlay.bind(this)),this.productOverlay.on("click touchstart",this.closeOverlay.bind(this)),this.mainNavToggle.on("click touchstart",this.toggleNav.bind(this))},getProduct:function(b){return a(this.allProducts[b])},setProduct:function(b){this.curProduct=a(this.allProducts[b]),this.setTextColor(),this.curProduct.css("z-index",1),this.mainVisual=this.curProduct.find(".visual"),this.mainVisual.addClass("current"),this.toggleProduct()},setTextColor:function(){this.curProduct.hasClass("light")?(a(".site-header").addClass("textlight"),a(".site-header").removeClass("textdark"),a(".btn-nav-toggle").addClass("textlight"),a(".btn-nav-toggle").removeClass("textdark"),a(".btn-close").addClass("textlight"),a(".btn-close").removeClass("textdark"),this.isPortrait?(this.btnNext.addClass("textlight"),this.btnNext.removeClass("textdark"),this.btnPrev.addClass("textlight"),this.btnPrev.removeClass("textdark"),a(".product-inner").find("h2").addClass("textlight"),a(".product-inner").find("h2").removeClass("textdark")):(this.btnNext.addClass("textdark"),this.btnNext.removeClass("textlight"),this.btnPrev.addClass("textdark"),this.btnPrev.removeClass("textlight"),a(".product-inner").find("h2").addClass("textdark"),a(".product-inner").find("h2").removeClass("textlight"))):(a(".site-header").addClass("textdark"),a(".site-header").removeClass("textlight"),a(".btn-nav-toggle").addClass("textdark"),a(".btn-nav-toggle").removeClass("textlight"),a(".btn-close").addClass("textdark"),a(".btn-close").removeClass("textlight"),this.isPortrait?(this.btnNext.addClass("textdark"),this.btnNext.removeClass("textlight"),this.btnPrev.addClass("textdark"),this.btnPrev.removeClass("textlight"),a(".product-inner").find("h2").addClass("textdark"),a(".product-inner").find("h2").removeClass("textlight")):(this.btnNext.addClass("textdark"),this.btnNext.removeClass("textlight"),this.btnPrev.addClass("textdark"),this.btnPrev.removeClass("textlight"),a(".product-inner").find("h2").addClass("textdark"),a(".product-inner").find("h2").removeClass("textlight")))},toggleProduct:function(){this.oldProduct&&this.oldProduct.fadeOut(1e3,"easeOutSine"),this.curProduct.fadeIn(1e3,"easeOutSine");setTimeout(this.resizeHandler.bind(this),1)},setNextProductIndex:function(a){a.preventDefault(),this.oldProduct=this.curProduct,this.selectedProductIndex<this.maxProducts-1?this.selectedProductIndex++:this.selectedProductIndex=0,this.setProduct(this.selectedProductIndex)},setPrevProductIndex:function(a){a.preventDefault(),this.oldProduct=this.curProduct,this.selectedProductIndex>0?this.selectedProductIndex--:this.selectedProductIndex=this.maxProducts-1,this.setProduct(this.selectedProductIndex)},setMainVisial:function(){this.visualWidth=this.mainVisual.width(),this.header.css("width",this.visualWidth),this.isPortrait||(this.heightTotal>=this.productVisualHeight?(this.mainVisual.css("width","auto"),this.mainVisual.css("height",this.productVisualHeight+"px")):(this.mainVisual.css("width","100%"),this.mainVisual.css("height","auto"))),this.visualWidth=this.mainVisual.width(),this.productInfo.css("width",this.visualWidth),this.productOverlay.width(this.visualWidth),this.productOverlay.find(".column").height(this.visualWidth/2),this.mainNav.height(this.visualWidth/2)},applyOrientation:function(){window.innerHeight>window.innerWidth?this.setPortraitMode():this.setLandscapeMode()},onTurnScreen:function(){0==window.orientation},setPortraitMode:function(){console.log("You are now in portrait"),this.isPortrait=!0,this.theBody.addClass("is-portrait"),this.theBody.removeClass("is-landscape"),this.mainVisual.css("height",this.viewportHeight+"px"),this.mainVisual.css("width","auto"),this.setTextColor();var a=(this.mainVisual.width()-this.viewportWidth)/2;window.scrollTo(a,0)},setLandscapeMode:function(){console.log("You are now in landscape"),this.isPortrait=!1,this.theBody.removeClass("is-portrait"),this.theBody.addClass("is-landscape"),this.mainVisual.css("width","100%"),this.mainVisual.css("height","auto"),this.setTextColor(),this.mainNav.height(this.visualWidth/2),console.log("landcs"),this.header.css("width","100%"),window.scrollTo(0,0)},openOverlay:function(){this.overlayCloseBtn.show(),this.productOverlay.addClass("active"),this.mainNavToggle.hide(),TweenLite.to(this.mainNav,.3,{right:"-33.3333334%",ease:Expo.easeInOut}),this.mainNavIsVisible=!1},closeOverlay:function(){this.productOverlay.removeClass("active"),this.overlayCloseBtn.hide(),this.mainNavToggle.show()},toggleNav:function(b){var c=a(b.target),d=c.siblings(".main-navigation");d.height(this.visualWidth/2),this.mainNavIsVisible?(console.log("go on"),TweenLite.to(d,.6,{right:"-33.3333334%",ease:Expo.easeInOut}),this.mainNavIsVisible=!1):(console.log("go OFF"),TweenLite.to(d,.6,{right:"0",ease:Expo.easeInOut}),this.mainNavIsVisible=!0)},scrollHandler:function(){},resizeHandler:function(){this.applyOrientation(),this.viewportHeight=this.theWindow.outerHeight(),this.viewportWidth=this.theWindow.outerWidth(),this.heightTotal=this.mainVisual.height(),this.productVisualHeight=this.viewportHeight-this.restHeigth,this.setMainVisial()}},a(function(){LISTEDBLUE.init({template:a("#product-template").html(),container:a(".product-wrap")})})}(window.jQuery);